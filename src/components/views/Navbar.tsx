"use client";
import useAnimateIn from "@/app/hooks/useAnimateIn";
import { animate, stagger, motion } from "framer-motion";
import Link from "next/link";
import React, { useEffect, useState } from "react";

const staggerMenuItems = stagger(0.15, { startDelay: 0.2 });

const Navbar = () => {
  const [navOpen, setNavOpen] = useState(false);
  const {
    ref: introRef,
    ctrls: introCtrls,
    vars: introVars,
  } = useAnimateIn({ delay: 0.25 });
  useEffect(() => {
    animate(
      "li",
      navOpen ? { opacity: 1, scale: 1 } : { opacity: 0, scale: 1 },
      {
        duration: 0.2,
        delay: navOpen ? staggerMenuItems : 0,
      }
    );
  }, [navOpen]);

  return (
    <nav className="nav">
      <div className="nav-container">
        <div className="navbar">
          <motion.div
            ref={introRef}
            initial="hidden"
            animate={introCtrls}
            variants={introVars}
          >
            <Link href={"/"} onClick={() => setNavOpen(false)}>
              <div
                className={`${
                  navOpen
                    ? "bg-background text-accent"
                    : "bg-accent text-background"
                } flex items-center justify-center pt-2 text-3xl transition-all duration-200 rounded-full w-14 h-14 hover:scale-110 cursor-pointer font-alchadera`}
              >
                JP
              </div>
            </Link>
          </motion.div>
          <motion.div
            ref={introRef}
            initial="hidden"
            animate={introCtrls}
            variants={introVars}
            className="cursor-pointer menu-toggle"
            onClick={() => setNavOpen(!navOpen)}
          >
            <div
              className={navOpen ? "hamBox hamBoxOpen" : "hamBox hamBoxClosed"}
            >
              <span
                className={`${navOpen ? "lineTop spin" : "lineTop"}  bg-text`}
              ></span>
              <span
                className={`${
                  navOpen ? "lineBottom spin" : "lineBottom"
                } bg-text`}
              ></span>
            </div>
          </motion.div>
        </div>
        <div
          className="nav-overlay"
          style={{
            top: navOpen ? "0" : "-100%",
            transitionDelay: navOpen ? "0s" : "0s",
          }}
        >
          <ul className="nav-links">
            <NavLink href="/" navOpen={navOpen}>
              Home
            </NavLink>
            <NavLink href="/" navOpen={navOpen}>
              Projects
            </NavLink>
            <NavLink href="/" navOpen={navOpen}>
              About Us
            </NavLink>
            <NavLink href="/" navOpen={navOpen}>
              Contact
            </NavLink>
          </ul>
          <div className="absolute bottom-0 pb-[.5em] px-[1em] font-semibold left-0 space-y-2 md:space-y-0 md:flex items-center justify-between w-full text-background uppercase">
            <div className="list-none">
              <li className="flex items-end">
                <span>Port of Spain, Trinidad and Tobago</span>

                <svg
                  className="pb-[2px] pl-1"
                  width="38"
                  height="36"
                  viewBox="0 0 38 36"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M8.01105 17.2475C8.08659 17.0844 8.25474 17.0402 8.32937 17.0384C8.57891 17.1365 9.13673 17.1276 9.52821 17.0384C9.91969 16.9493 9.73327 17.1555 10.0129 17.1276C10.2925 17.0996 10.2273 16.8479 10.4696 16.9039C10.712 16.9598 10.7399 16.8852 10.7958 16.6801C10.8518 16.4751 10.9507 16.6801 11.1687 16.6801C11.2681 16.6801 11.2807 16.6453 11.2774 16.6232C11.2746 16.6047 11.2606 16.5952 11.2774 16.6232C11.2844 16.6349 11.2969 16.6532 11.3178 16.6801C11.4483 16.8479 11.6472 16.8106 11.7964 16.6801C11.9456 16.5497 11.7964 16.4751 11.7964 16.2794C11.7964 16.0836 11.9506 16.27 12.1101 16.4005C12.2696 16.531 12.1847 16.7454 12.3711 16.6242C12.5575 16.5031 12.6321 16.2794 12.6414 16.4005C12.6507 16.5217 12.5948 16.7547 12.893 16.7454C13.1913 16.7361 13.0049 16.5031 13.21 16.4005C13.415 16.298 13.3032 16.0277 13.4243 16.1116C13.5455 16.1955 13.8251 16.0743 13.8624 15.9252C13.8997 15.776 14.1048 16.037 14.3471 15.9252C14.5895 15.8133 14.4869 15.7947 14.6361 15.6455C14.7852 15.4964 14.6081 15.3752 14.7945 15.3379C14.9809 15.3007 14.9902 15.3566 15.4004 15.5337C15.8105 15.7108 15.7266 15.6455 16.2206 15.6455C16.7146 15.6455 17.0036 15.8413 17.7026 15.7947C18.4017 15.7481 19.1008 15.8972 19.3711 15.6455C19.6414 15.3939 19.9676 15.5058 20.0795 15.4218C20.1913 15.3379 20.3498 15.1608 20.6667 15.1795C20.9836 15.1981 20.7785 15.0583 21.0115 15.0583C21.2446 15.0583 21.3005 15.2727 21.5522 15.0583C21.8038 14.844 21.9064 15.0583 22.1021 14.8719C22.2978 14.6854 22.1953 15.0583 22.4656 14.8719C22.7359 14.6854 22.6147 14.9465 22.8757 14.7973C23.1367 14.6482 23.2113 14.5736 23.7892 14.5269C24.3671 14.4802 23.9756 14.7414 24.4044 14.7414C24.8331 14.7414 24.6094 14.6481 25.0475 14.7414C25.4856 14.8347 25.4856 14.6481 25.7559 14.5269C26.0262 14.4057 25.8584 14.5549 26.2219 14.6481C26.5854 14.7413 26.4083 14.7693 26.4083 14.8719C26.4083 14.9744 26.6973 15.0024 26.4083 15.0583C26.1194 15.1142 26.5202 15.4964 26.0728 15.5058C25.6254 15.5151 25.5601 15.8973 25.6347 16.1862C25.7093 16.4752 25.672 16.3914 25.5601 16.5964C25.4483 16.8015 25.0568 16.6803 24.7865 17.3607C24.5162 18.0412 24.2832 17.5192 24.3111 17.9666C24.3391 18.414 23.6866 18.0971 23.4257 18.1903C23.1647 18.2835 23.1926 19.2063 23.3138 19.7562C23.435 20.3061 23.5934 21.6763 23.6121 21.928C23.6307 22.1796 24.1527 23.0372 23.8731 22.944C23.5934 22.8507 23.7426 23.3354 23.3697 23.1677C22.9969 22.9999 23.0155 24.3328 23.1647 24.687C23.3138 25.0412 23.668 26.6164 24.0688 27.4087C24.4696 28.2009 24.684 27.8561 24.8984 27.8467C25.1127 27.8374 24.9543 28.0798 24.8424 28.145C24.7306 28.2103 24.6747 27.9772 24.423 28.145C24.1713 28.3128 24.1806 29.9999 24.0688 30.7362C23.9569 31.4726 24.2645 32.8241 24.423 33.1597C24.5498 33.4281 24.3142 33.3088 24.1806 33.2156C24.1372 33.2342 24.0763 33.1932 24.1806 32.88C24.3111 32.4886 22.7825 32.9732 22.8198 33.3647C22.8571 33.7562 22.5029 33.924 22.186 33.8867C21.8691 33.8494 21.9902 33.9613 21.3471 34.2036C20.704 34.4459 21.2259 34.39 20.7506 34.5391C20.2752 34.6883 19.7998 34.8467 19.5854 34.7349C19.3711 34.623 19.2033 34.8467 19.2219 34.7349C19.2406 34.623 18.5415 34.8933 18.0382 34.7349C17.5349 34.5764 17.9543 34.3527 17.656 34.5391C17.3578 34.7256 17.2645 34.6324 17.0968 34.5391C16.929 34.4459 16.4909 34.5298 16.3325 34.6324C16.174 34.7349 15.8944 34.7628 15.6893 34.7349C15.4843 34.7069 15.5309 34.8467 15.4563 34.8467C15.3817 34.8467 15.1207 34.7256 14.8132 34.8933C14.5056 35.0611 14.4217 34.8933 14.3378 34.8933C14.2539 34.8933 14.1607 35.0611 14.0488 34.8933C13.937 34.7256 13.8904 35.0611 13.6853 34.8467C13.4803 34.6324 12.716 35.0611 12.3152 34.9772C11.9144 34.8933 12.0728 35.1077 11.8957 35.0611C11.7186 35.0145 11.4483 35.0611 11.2433 35.0611C11.0382 35.0611 11.0289 34.8467 10.7958 34.8933C10.5628 34.9399 10.3857 34.7069 10.0875 34.8467C9.78919 34.9866 9.50025 34.912 9.09007 34.8933C8.67989 34.8747 8.93167 35.1077 8.50291 35.0611C8.07415 35.0145 8.51223 35.2848 7.84107 35.2848C7.16991 35.2848 7.58014 35.2848 7.09545 34.9772C6.61077 34.6696 6.60145 34.7628 5.71596 34.6044C4.83048 34.4459 4.71863 34.6324 4.04752 34.8467C3.37642 35.0611 3.95431 34.3061 3.18068 34.4925C2.40705 34.679 2.9755 34.6417 1.46552 35.2848C-0.0262171 35.9202 -0.00793222 35.5094 0.00171467 35.2927L0.00206206 35.2848C0.011383 35.0704 0.524054 34.6696 0.617263 34.4925C0.710472 34.3154 0.906168 34.5298 1.16715 34.4273C1.42814 34.3248 1.40034 34.3248 1.80114 34.3061C2.20194 34.2875 2.25801 34.1477 2.47239 34.0358C2.68677 33.924 2.60282 33.4393 2.58417 33.2995C2.56553 33.1597 3.15267 33.3554 3.32976 33.1597C3.50686 32.9639 3.4043 33.141 3.60004 32.9732C3.79578 32.8055 3.88889 32.8427 4.14987 32.8521C4.41086 32.8614 5.0632 32.7961 5.34283 32.7216C5.62246 32.647 6.07923 32.4886 6.10719 32.2555C6.13515 32.0225 5.72523 32.0784 6.2938 31.9293C6.86237 31.7802 7.27249 31.6124 7.28181 31.4353C7.29114 31.2582 7.84107 31.1277 7.69193 30.8388C7.5428 30.5498 7.5428 30.3447 7.84107 30.2236C8.13934 30.1024 7.75718 30.2828 9.09007 30.6151C10.423 30.9473 10.2921 30.676 11.1878 30.2828C12.0835 29.8897 11.889 29.4844 11.9457 29.2899C12.0025 29.0953 12.1767 29.1683 12.2375 28.9697C12.2983 28.7711 12.197 28.7265 12.124 28.6535C12.0511 28.5806 12.0673 28.3009 12.124 28.1753C12.1808 28.0496 12.2132 27.7984 12.1038 27.6119C11.9943 27.4255 12.0146 27.3039 11.9822 27.2107C11.9498 27.1175 11.5404 26.9472 11.5364 26.8297C11.5323 26.7122 11.5404 26.7527 11.4107 26.6757C11.281 26.5987 11.358 26.2299 11.3378 26.1002C11.3175 25.9705 11.0297 25.784 11.1473 25.7516C11.2648 25.7192 11.4107 25.5652 11.4107 25.3949C11.4107 25.2247 11.7593 24.2277 11.8241 24.0777C11.889 23.9278 12.0551 23.9561 11.9092 23.7859C11.7633 23.6157 11.8525 23.6967 11.8484 23.5833C11.8444 23.4698 11.7666 23.192 11.9506 23.0775C12.1347 22.9631 12.1197 22.2866 12.0402 22.1772C11.9606 22.0677 12.0252 21.8638 11.9506 21.7643C11.876 21.6648 11.8163 21.5355 11.7964 21.4061C11.7765 21.2768 11.7865 21.2768 11.6472 21.0529C11.5079 20.8291 11.5676 20.5953 11.3686 20.451C11.1696 20.3068 11.09 20.3217 11.0801 20.0779C11.0701 19.8342 11.2492 20.1774 11.2641 19.9585C11.2791 19.7397 11.0403 19.9834 10.9507 19.8242C10.8612 19.6651 10.7169 19.5705 10.3837 19.5158C10.0504 19.4611 10.2344 19.277 10.13 19.1925C10.0255 19.1079 10.0155 18.9438 9.85138 18.9935C9.68723 19.0432 9.52307 18.9736 9.41363 18.899C9.30419 18.8244 8.98085 18.894 8.62269 18.6702C8.26453 18.4463 8.10534 18.8741 7.8218 18.8393C7.53825 18.8045 7.62779 18.894 7.19502 18.7995C6.76224 18.705 6.92639 18.6304 6.89157 18.6154C6.85675 18.6005 6.75229 18.5458 6.83188 18.4364C6.91147 18.3269 6.9065 18.2821 6.83188 18.2523C6.75726 18.2225 6.75229 18.0583 6.75229 17.9737C6.75229 17.8892 7.38426 17.8941 7.4539 17.7748C7.52355 17.6554 7.57337 17.526 7.65296 17.531C7.73255 17.536 7.91661 17.4514 8.01105 17.2475Z"
                    className="fill-background"
                  />
                  <path
                    d="M31.0144 3.15843C31.1571 3.13084 31.2006 2.95899 31.2045 2.87652C31.2363 2.73897 31.3836 2.71 31.732 2.69258C32.0804 2.67516 32.0238 2.53144 32.1283 2.36596C32.2328 2.20047 32.2328 2.1003 32.5028 2.09595C32.7728 2.09159 32.7598 1.96965 32.7598 1.88255C32.7598 1.79545 32.7859 1.69529 32.9557 1.65174C33.1256 1.60819 32.9383 1.42093 33.1604 1.52545C33.3825 1.62996 33.4086 1.69964 33.5698 1.42093C33.7309 1.14221 33.9711 1.36638 34.0418 1.26125C34.1125 1.15613 34.2665 1.13257 34.3753 1.23769C34.484 1.34282 34.6453 1.27938 34.6526 1.14344C34.6598 1.0075 34.649 1.09088 34.7233 1.02381C34.7976 0.956752 34.7337 0.919917 34.9812 0.873865C35.2286 0.827814 34.9812 0.735486 35.2171 0.626152C35.453 0.516818 35.3149 0.718223 35.5336 0.591625C35.7523 0.465028 35.6084 0.591625 35.8098 0.557099C36.0112 0.522572 35.8731 0.275131 36.2011 0.672188C36.5185 1.05636 36.8789 0.605539 36.902 0.591515C36.8816 0.573387 36.6032 0.112102 36.7363 0.212015C36.8744 0.315686 36.8168 0.108344 37.001 0.142779C37.1851 0.177215 37.1851 0.108344 37.2369 0.0679551C37.2887 0.0275665 37.3693 -0.0815527 37.4556 0.108344C37.5419 0.29824 37.4901 0.212015 37.6512 0.212015C37.8124 0.212015 37.7203 0.281111 37.6512 0.522797C37.5822 0.764483 37.7088 0.614916 37.7203 0.873865C37.7318 1.13282 37.6512 0.914163 37.5304 0.919917C37.4095 0.925672 37.7088 1.20186 37.4901 1.09828C37.2714 0.994702 37.2829 1.6105 37.4556 1.54144C37.6282 1.47239 37.7893 1.67961 37.6512 1.67386C37.5131 1.6681 37.4901 1.82924 37.4901 1.88678C37.4901 1.94433 37.6627 2.04785 37.4556 2.13992C37.2484 2.23199 37.3578 2.24926 37.2829 2.40463C37.2081 2.56 37.2657 2.47943 37.2829 2.56575C37.3002 2.65207 37.2599 2.68659 37.1851 2.56575C37.1103 2.44491 37.0125 2.51963 37.001 2.34134C36.9895 2.16305 36.8859 2.23771 36.8168 2.30101C36.7478 2.36431 36.6787 2.35276 36.765 2.51963C36.8514 2.68651 36.8226 2.70953 36.8168 2.80161C36.8111 2.89369 36.6845 2.98574 36.5579 2.89367C36.4313 2.8016 36.4313 2.8534 36.2184 2.80161C36.0055 2.74982 35.8789 2.84765 35.6314 3.14688C35.384 3.44611 35.6429 3.41158 35.6314 3.52091C35.6199 3.63025 35.5278 3.46913 35.3782 3.52091C35.0387 3.68779 35.1826 3.52092 34.9582 3.65902C34.446 4.22871 34.3827 4.21145 34.2216 4.41285C34.0605 4.61426 33.9857 4.41285 33.8993 4.50492C33.813 4.59699 33.7785 4.59124 33.7382 4.50492C33.6979 4.41861 33.5195 4.2805 33.3757 4.41285C33.2318 4.5452 33.111 4.41285 33.0074 4.35531C32.9038 4.29776 32.6564 4.66029 32.6564 4.79265C32.6564 4.925 32.5298 4.85019 32.4262 4.79265C32.3226 4.7351 32.173 5.17244 32.0867 5.02858C32.0004 4.88472 31.8047 4.8617 31.6091 4.74086C31.4134 4.62001 31.3904 4.66605 31.2926 4.94226C31.1948 5.21847 30.9473 5.17244 30.8322 5.22423C30.7056 5.5062 30.6884 5.27026 30.6423 5.62704C30.5963 5.98381 30.4006 5.7709 30.4275 5.73062C30.4544 5.69034 30.2319 5.46016 30.2625 5.7709C30.2932 6.08164 30.2319 6.01834 29.9557 6.00683C29.6795 5.99532 29.9115 5.7709 29.7849 5.73062C29.6583 5.69034 29.6277 5.77666 29.5605 5.68458C29.4933 5.59251 29.2958 5.65006 29.0656 5.62704C28.8354 5.60402 28.6569 5.92052 28.5648 5.68458C28.4728 5.44865 28.9042 5.41988 28.697 5.17244C28.4899 4.925 28.8275 4.71208 28.7872 4.94226C28.7483 5.19546 29.4491 5.10339 29.3398 5.02858C29.2523 4.96873 29.2459 4.9461 29.2535 4.94226C29.4186 4.93075 29.7244 4.8686 29.6277 4.71208C29.531 4.55556 29.6143 4.54329 29.668 4.55671C29.7352 4.57206 29.8868 4.56477 29.9557 4.41285C30.0418 4.22296 29.9214 4.29776 29.8696 4.21145C29.8178 4.12513 30.0996 4.13664 30.2319 4.0791C30.3641 4.02155 30.1801 3.9525 30.2319 3.87194C30.2836 3.79137 30.4275 3.96976 30.4275 3.73383C30.4275 3.4979 30.4274 3.54969 30.7267 3.3713C31.0259 3.19291 30.836 3.19291 31.0144 3.15843Z"
                    className="fill-background"
                  />
                </svg>
              </li>
            </div>
            <ul className="flex gap-x-6">
              <li className="">
                <Link
                  className="hover-underline-animation-small"
                  href="https://twitter.com/ja3danp"
                >
                  Twitter
                </Link>
              </li>
              <li>
                <Link
                  className="hover-underline-animation-small"
                  href="https://github.com/jaedanpersaud12"
                >
                  Github
                </Link>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </nav>
  );
};

export default Navbar;

type NavLinkProps = {
  children: React.ReactNode;
  href: string;
  navOpen: boolean;
};

const NavLink = ({ children, href, navOpen }: NavLinkProps) => {
  return (
    <li className="hover-underline-animation font-alchadera text-[3.4em] md:text-[4.6em] lg:text-[6em]">
      <Link href={href}>{children}</Link>
      <div className="nav-item-wrapper"></div>
    </li>
  );
};
